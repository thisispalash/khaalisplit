{% load static %}

<header class="border-b border-foreground/10">
  <nav class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">

    {# Logo / Home link #}
    <a href="/" class="text-xl font-bold text-foreground hover:text-foreground/80 transition-colors">
      khaali<span class="text-foreground/60">Split</span>
    </a>

    {# Navigation links (shown when logged in) #}
    {% if user.is_authenticated %}
    <div class="flex items-center gap-6 text-sm">
      <a href="/friends/"
        class="text-foreground/70 hover:text-foreground transition-colors">
        Friends
      </a>
      <a href="/groups/"
        class="text-foreground/70 hover:text-foreground transition-colors">
        Groups
      </a>
      <a href="/profile/"
        class="text-foreground/70 hover:text-foreground transition-colors">
        {{ user.subname }}
      </a>
    </div>
    {% endif %}

    {# Wallet connection status + auth actions #}
    <div id="wallet-status" class="flex items-center gap-3">
      {% if user.is_authenticated %}
      <button
        id="wallet-btn"
        class="px-3 py-1.5 text-xs border border-foreground/20 rounded-md
               text-foreground/70 hover:text-foreground hover:border-foreground/40
               transition-colors cursor-pointer"
        _="
          on click
            if walletConnected
              call window.disconnectWallet()
            else
              call window.connectWallet()
            end
          end
          on walletChanged from body
            if walletConnected
              set my textContent to walletAddress.substring(0, 6) + '...' + walletAddress.substring(38)
              add .border-foreground/40 to me
            else
              set my textContent to 'Connect Wallet'
              remove .border-foreground/40 from me
            end
          end
        "
      >
        Connect Wallet
      </button>
      <form method="post" action="/api/auth/logout/">
        {% csrf_token %}
        <button type="submit"
          class="text-xs text-foreground/40 hover:text-foreground/70 transition-colors cursor-pointer">
          Logout
        </button>
      </form>
      {% else %}
      <a href="/api/auth/signup/"
        class="px-3 py-1.5 text-xs border border-foreground/20 rounded-md
               text-foreground/70 hover:text-foreground hover:border-foreground/40
               transition-colors">
        Get Started
      </a>
      {% endif %}
    </div>

  </nav>
</header>
